<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  	<meta http-equiv="cleartype" content="on">
		<title>Working with data</title><html lang="en" data-svelte="svelte-157iplb"></html><meta name="description" data-svelte="svelte-157iplb"><link rel="canonical" href="https://graphics.reuters.com" data-svelte="svelte-157iplb"><link rel="shortcut icon" type="image/x-icon" href="https://s3.reutersmedia.net/resources_v2/images/favicon/favicon.ico" data-svelte="svelte-157iplb"><link rel="icon" type="image/png" href="https://s3.reutersmedia.net/resources_v2/images/favicon/favicon-16x16.png" sizes="16x16" data-svelte="svelte-157iplb"><link rel="icon" type="image/png" href="https://s1.reutersmedia.net/resources_v2/images/favicon/favicon-32x32.png" sizes="32x32" data-svelte="svelte-157iplb"><link rel="icon" type="image/png" href="https://s3.reutersmedia.net/resources_v2/images/favicon/favicon-96x96.png" sizes="96x96" data-svelte="svelte-157iplb"><meta property="og:url" content="https://graphics.reuters.com" data-svelte="svelte-157iplb"><meta property="og:type" content="article" data-svelte="svelte-157iplb"><meta property="og:title" content="Working with data" itemprop="name" data-svelte="svelte-157iplb"><meta property="og:description" itemprop="description" data-svelte="svelte-157iplb"><meta property="og:image" content="https://reuters-graphics.github.io/docs_graphics-kit/cdn/images/reuters-graphics.jpg" itemprop="image" data-svelte="svelte-157iplb"><meta property="og:site_name" content="Reuters" data-svelte="svelte-157iplb"><meta name="twitter:card" content="summary_large_image" data-svelte="svelte-157iplb"><meta name="twitter:site" content="@ReutersGraphics" data-svelte="svelte-157iplb"><meta name="twitter:creator" content="@ReutersGraphics" data-svelte="svelte-157iplb"><meta name="twitter:domain" content="https://graphics.reuters.com" data-svelte="svelte-157iplb"><meta name="twitter:title" content="Working with data" data-svelte="svelte-157iplb"><meta name="twitter:description" data-svelte="svelte-157iplb"><meta name="twitter:image:src" content="https://reuters-graphics.github.io/docs_graphics-kit/cdn/images/reuters-graphics.jpg" data-svelte="svelte-157iplb"><meta property="fb:app_id" content="319194411438328" data-svelte="svelte-157iplb"><meta property="fb:admins" content="616167736" data-svelte="svelte-157iplb"><meta property="fb:admins" content="625796953" data-svelte="svelte-157iplb"><meta property="fb:admins" content="571759798" data-svelte="svelte-157iplb"><!-- HTML_TAG_START --><script type="application/ld+json" âœ‚prettier:contentâœ‚="JyArIEpTT04uc3RyaW5naWZ5KG9yZ0xkSnNvbikgKyAn" âœ‚prettier:contentâœ‚="e30=">{}</script><!-- HTML_TAG_END --><!-- HTML_TAG_START --><script type="application/ld+json" âœ‚prettier:contentâœ‚="JyArIEpTT04uc3RyaW5naWZ5KGFydGljbGVMZEpzb24pICsgJw==" âœ‚prettier:contentâœ‚="e30=">{}</script><!-- HTML_TAG_END -->

		

		<link rel="modulepreload" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/start-1b9e27d7.js">
		<link rel="modulepreload" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/chunks/vendor-af66daed.js">
		<link rel="modulepreload" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/chunks/preload-helper-58936509.js">
		<link rel="modulepreload" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/pages/__layout.svelte-c1b390bd.js">
		<link rel="modulepreload" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/pages/[...slug].svelte-b0291836.js">
		<link rel="stylesheet" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/assets/start-c446e5f0.css">
		<link rel="stylesheet" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/assets/vendor-0825bdaf.css">
		<link rel="stylesheet" href="https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/assets/pages/__layout.svelte-994a482c.css">

		<script type="module">
			import { start } from "https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/start-1b9e27d7.js";
			start({
				target: document.querySelector("#svelte-app"),
				paths: {"base":"/docs_graphics-kit","assets":"https://reuters-graphics.github.io/docs_graphics-kit/cdn"},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/pages/__layout.svelte-c1b390bd.js"),
						import("https://reuters-graphics.github.io/docs_graphics-kit/cdn/app/pages/[...slug].svelte-b0291836.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "\u002Ffor_developers\u002Fdata",
						query: new URLSearchParams(""),
						params: {slug:"for_developers\u002Fdata"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id='svelte-app'>
			


<nav class="nav" style="background: #fff;"><div class="logo-container"><a href="https://github.com/reuters-graphics/"><figure class="navbar-brand"><img class="logo reuters-graphics" src="https://graphics.thomsonreuters.com/style-assets/images/logos/reuters-graphics-logo/svg/graphics-logo-color-dark.svg" alt="Reuters graphics logo"></figure></a></div>
	</nav>

<div class="page-container svelte-1lnzjhs"><div class="page-menu svelte-1lnzjhs"><button class="svelte-1lnzjhs"><svg id="" class="fa svelte-1w3t65e" style="width:1.25em;height:1em;text-align:center;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 448 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(224 256)" transform-origin="112 0"><g transform="translate(0,0) scale(1,1)"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z" fill="currentColor" transform="translate(-224 -256)"></path></g></g></svg></button>
    <ul class="home svelte-1lnzjhs"><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/" class="svelte-1lnzjhs"><svg id="" class="fa svelte-1w3t65e" style="width:1.25em;height:1em;text-align:center;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 576 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(288 256)" transform-origin="144 0"><g transform="translate(0,0) scale(1,1)"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z" fill="currentColor" transform="translate(-288 -256)"></path></g></g></svg> Home</a></li></ul>
    <h5 class="svelte-1lnzjhs">for clients</h5>
      <ul class="svelte-1lnzjhs"><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_clients/using-the-kit" class="svelte-1lnzjhs">Using the kit</a>
          </li>
      </ul><h5 class="svelte-1lnzjhs">for developers</h5>
      <ul class="svelte-1lnzjhs"><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/prerequisites" class="svelte-1lnzjhs">Prereqs</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/quickstart" class="svelte-1lnzjhs">Quickstart</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/commands" class="svelte-1lnzjhs">CLI commands</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/directory" class="svelte-1lnzjhs">What&#39;s in it</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/components" class="svelte-1lnzjhs">Building with Svelte</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/ejs-to-svelte" class="svelte-1lnzjhs">Transitioning from EJS to Svelte</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/graphics-components" class="svelte-1lnzjhs">Using Reuters Graphics Components</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/styles" class="svelte-1lnzjhs">Styles</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/media" class="svelte-1lnzjhs">Working with media files</a>
          </li><li class="svelte-1lnzjhs active"><a href="/docs_graphics-kit/for_developers/data" class="svelte-1lnzjhs">Working with data</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/google-docs-and-sheets" class="svelte-1lnzjhs">Google docs and sheets</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/translation" class="svelte-1lnzjhs">Translation</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/ai" class="svelte-1lnzjhs">AI graphics</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/flats" class="svelte-1lnzjhs">Flat files</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/pages" class="svelte-1lnzjhs">Making pages</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/svelte-faqs" class="svelte-1lnzjhs">Svelte FAQs</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/snippets" class="svelte-1lnzjhs">Snippets</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/metadata" class="svelte-1lnzjhs">Metadata</a>
          </li><li class="svelte-1lnzjhs"><a href="/docs_graphics-kit/for_developers/automated-publishing" class="svelte-1lnzjhs">Automated publishing</a>
          </li>
      </ul></div>
  <div class="page-content svelte-1lnzjhs"><article class="container-fluid">

<section class="wide"><h1 id="working-with-data"><a href="#working-with-data">Working with data</a></h1><p>Data drives pages. This guide outlines how to work with different types of data, depending on the role your data plays in your project.</p><ul><li><a href="#static-vs-dynamic-data">Static vs. dynamic data</a></li>
<li><a href="#data-file-types">Data file types</a></li>
<li><a href="#where-to-put-your-static-data">Where to put your static data</a><ul><li><a href="#what-if-my-static-data-lives-somewhere-else">Remote static data</a></li></ul></li>
<li><a href="#fetching-dynamic-data">Fetching dynamic data</a></li>
<li><a href="#preparing-static-data">Preparing static data</a></li>
</ul><h2 id="static-vs-dynamic-data"><a href="#static-vs-dynamic-data">Static vs. dynamic data</a></h2><p>The first question you should ask about your data is: Is my data <em>static</em> or <em>dynamic</em>?</p><p>What do we mean?</p><p><strong>Static data</strong> is data that isnâ€™t going to change beyond the point you publish your project. The text you pull into your project from a Google doc is an example of this kind of data. That text may change while youâ€™re developing the project (getting it edited, etc.), but once you publish, itâ€™s locked in, and any changes to the data from there will mean you need to republish the project.</p><p>This is the main type of data weâ€™ll talk about working with.</p><p><strong>Dynamic data</strong> is data that you expect <em>will change</em> after you publish your project. Tracking projects often use this type of data and fetch it on page load to make sure readers see the latest data on the page.</p><p>In general, dynamic data often is published separately from the project youâ€™re working on. See our <a href="https://github.com/reuters-graphics/bluprint_github-action-scraper" rel="nofollow">GitHub scraper bluprint</a> for an example of setting up a scraper that can independently publish data on a timer that your project can then fetch.</p><p>We wonâ€™t talk as much about this type of data.</p><blockquote><p>Itâ€™s worth noting one alternative pattern we <em>do</em> use for tracking projects using dynamic data. We can setup a project to re-publish from GitHub on a schedule or through an API as data updates. That lets us treat dynamic data as though it were static. Read more about that setup in the <a href="https://github.com/reuters-graphics/bluprint_graphics-kit/blob/master/docs/developers/automated-publishing.md" rel="nofollow">Automated publishing</a> doc.</p>
</blockquote><h2 id="data-file-types"><a href="#data-file-types">Data file types</a></h2><p>A quick note on data file types. Weâ€™re not going to cover using data in delimited file formats, e.g., TSV, CSV, or the like.</p><p>In general, we recommend converting your data to JSON, weâ€™ll talk more about why and how to convert it if your source data comes in one of those formats.</p><h2 id="where-to-put-your-static-data"><a href="#where-to-put-your-static-data">Where to put your static data</a></h2><p>You might be tempted to put static data with other media files like images or fonts and then fetch them in your codeâ€¦</p><p><strong>But donâ€™t!</strong></p><p>If your data is indeed static, then itâ€™s actually far better to import your data directly into your components because the content that data makes can then be baked out into the page when we build it, which means faster load times and better for accessibility and SEO.</p><p>Because weâ€™re going to import our data just like a component, we can treat it like code and put it right next to the component that uses it.</p><p>Say we have data for a chart, we might have a directly structure like this:</p><pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">src/
  lib/
    my-chart/
      index.svelte
      data.json ðŸ‘ˆ
    Page.svelte</code><!-- HTML_TAG_END --></pre><p>Now you can import your data just like a regular module in the component that uses it:</p><pre class="language-svelte"><!-- HTML_TAG_START --><code class="language-svelte"><span class="token comment">&lt;!-- mychart/index.svelte --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">'./data.json'</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token each"><span class="token punctuation">&#123;</span><span class="token keyword">#each</span> <span class="token language-javascript">data </span><span class="token keyword">as</span> <span class="token language-javascript">d<span class="token punctuation">&#125;</span></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">style="width:</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>d<span class="token punctuation">.</span>value<span class="token punctuation">&#125;</span></span><span class="token attr-name">%;</span> <span class="token attr-name"><span class="token namespace">background:</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>d<span class="token punctuation">.</span>colour<span class="token punctuation">&#125;</span></span><span class="token attr-name">;"</span><span class="token punctuation">></span></span><span class="token language-javascript"><span class="token punctuation">&#123;</span>d<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token each"><span class="token punctuation">&#123;</span><span class="token keyword">/each</span><span class="token punctuation">&#125;</span></span></code><!-- HTML_TAG_END --></pre><h3 id="what-if-my-static-data-lives-somewhere-else"><a href="#what-if-my-static-data-lives-somewhere-else">What if my static data lives somewhere else?</a></h3><p>If your static data lives somewhere other than in your project, then you can use Sveltekitâ€™s built-in <a href="https://kit.svelte.dev/docs#loading" rel="nofollow">load</a> function to import your data and then pass it to the components that need it through props.</p><p>To do that, weâ€™re going to go to the component in the <code>pages/</code> directory that defines the page that needs the data and export a load function that returns the data in a props object we can then pass to any components that need it:</p><pre class="language-svelte"><!-- HTML_TAG_START --><code class="language-svelte"><span class="token comment">&lt;!-- ðŸ‘‡ Add this script tag. Note the context="module"! --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// Export an async load function</span>
  <span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> fetch <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">https://graphics.reuters.com/path/to/my.json</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          myData<span class="token operator">:</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Oops!</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      status<span class="token operator">:</span> res<span class="token punctuation">.</span>status<span class="token punctuation">,</span>
      error<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Could not load </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>url<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- pages/index.svelte --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> Page <span class="token keyword">from</span> <span class="token string">'$lib/Page.svelte'</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// ðŸ‘‡ Define a prop for this data</span>
  <span class="token keyword">export</span> <span class="token keyword">let</span> myData<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- ðŸ‘‡ Pass our data to the Page component, which can in turn pass it
to any other components that need this data! --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Page</span> <span class="token attr-name">myData="</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>myData<span class="token punctuation">&#125;</span></span><span class="token attr-name">"</span> <span class="token punctuation">/></span></span></code><!-- HTML_TAG_END --></pre><h2 id="fetching-dynamic-data"><a href="#fetching-dynamic-data">Fetching dynamic data</a></h2><p>If your data is dynamic, you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="nofollow">fetch API</a> to get it.</p><p>Hereâ€™s an example:</p><pre class="language-svelte"><!-- HTML_TAG_START --><code class="language-svelte"><span class="token comment">&lt;!-- mychart/index.svelte --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// Create a variable for your data...</span>
  <span class="token keyword">let</span> myData<span class="token punctuation">;</span>

  <span class="token comment">// ... and an async function to get it...</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fetchMyData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
      <span class="token string">'http://graphics.thomsonreuters.com/data/2021/biden-approval-tracker/approval.json'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myData <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

  <span class="token comment">// ... then call that function!</span>
  <span class="token function">fetchMyData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token language-javascript"><span class="token punctuation">&#123;</span>#<span class="token keyword">if</span> myData<span class="token punctuation">&#125;</span></span>
  <span class="token comment">&lt;!-- Do something with your data once it's been fetched! --></span>
<span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token punctuation">&#125;</span></span></code><!-- HTML_TAG_END --></pre><p><strong>Remember</strong>, because we have to wait for the async function to fetch your data, any content made from this data wonâ€™t be baked out into the page. That means your component will be slower to load and not as accessible or SEO friendly. If your data is static, use one of the patterns above. If not, then that slowness is the cost of keeping your page up-to-date.</p><h2 id="preparing-static-data"><a href="#preparing-static-data">Preparing static data</a></h2><p>So what if you need to <em>prepare</em> your static data? Say, you need to fetch it from an API or filter it down to just the data you need on the page or otherwise convert it from another format to JSON.</p><p>Your best bet is to write a simple script in Node to do what you need and save the resulting JSON in your project.</p><p>A good place to put such scripts is the <code>bin/</code> folder in your project.</p><p>So letâ€™s go through an example. Make a <code>.cjs</code> file (for CommonJS Node script) in your bin directory:</p><pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash">bin/
  scrapeData.cjs</code><!-- HTML_TAG_END --></pre><p>â€¦ And letâ€™s say that script calls a simple API and parses the data.</p><pre class="language-javascript"><!-- HTML_TAG_START --><code class="language-javascript"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://some.api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> resp<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">filterData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=></span> d<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">writeData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> outputPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'src/lib/mychart/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>outputPath<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringfy</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> rawData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> filteredData <span class="token operator">=</span> <span class="token function">filterData</span><span class="token punctuation">(</span>rawData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">writeData</span><span class="token punctuation">(</span>filteredData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre><p>Now you can call that file from the command line with:</p><pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash">node ./bin/scrapeData.cjs</code><!-- HTML_TAG_END --></pre><p><strong>BONUS</strong>: Letâ€™s say you want your script to run and refresh your data everytime before you publish.</p><p>You can add it to the front of the <code>upload</code> script in <code>package.json</code> like this:</p><pre class="language-json"><!-- HTML_TAG_START --><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"upload"</span><span class="token operator">:</span> <span class="token string">"node ./bin/scrapeData.cjs &amp;&amp; npm-run-all publish:upload"</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre><p>Now your script will refresh your data everytime before you upload your page to the RNGS server.</p></section></article></div>
</div>





			<script type="application/json" data-type="svelte-data" data-url="/docs.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"[{\"slug\":\"for_clients\u002Fusing-the-kit\",\"title\":\"Using the kit\",\"published\":true,\"order\":1},{\"slug\":\"for_developers\u002Fai\",\"title\":\"AI graphics\",\"published\":true,\"order\":13},{\"slug\":\"for_developers\u002Fautomated-publishing\",\"title\":\"Automated publishing\",\"published\":true,\"order\":19},{\"slug\":\"for_developers\u002Fcommands\",\"title\":\"CLI commands\",\"published\":true,\"order\":4},{\"slug\":\"for_developers\u002Fcomponents\",\"title\":\"Building with Svelte\",\"published\":true,\"order\":6},{\"slug\":\"for_developers\u002Fdata\",\"title\":\"Working with data\",\"published\":true,\"order\":10},{\"slug\":\"for_developers\u002Fdirectory\",\"title\":\"What's in it\",\"published\":true,\"order\":5},{\"slug\":\"for_developers\u002Fejs-to-svelte\",\"title\":\"Transitioning from EJS to Svelte\",\"published\":true,\"order\":7},{\"slug\":\"for_developers\u002Fflats\",\"title\":\"Flat files\",\"published\":true,\"order\":14},{\"slug\":\"for_developers\u002Fgoogle-docs-and-sheets\",\"title\":\"Google docs and sheets\",\"published\":true,\"order\":11},{\"slug\":\"for_developers\u002Fgraphics-components\",\"title\":\"Using Reuters Graphics Components\",\"published\":true,\"order\":8},{\"slug\":\"for_developers\u002Fmedia\",\"title\":\"Working with media files\",\"published\":true,\"order\":9},{\"slug\":\"for_developers\u002Fmetadata\",\"title\":\"Metadata\",\"published\":true,\"order\":18},{\"slug\":\"for_developers\u002Fpages\",\"title\":\"Making pages\",\"published\":true,\"order\":15},{\"slug\":\"for_developers\u002Fprerequisites\",\"title\":\"Prereqs\",\"published\":true,\"order\":2},{\"slug\":\"for_developers\u002Fquickstart\",\"title\":\"Quickstart\",\"published\":true,\"order\":3},{\"slug\":\"for_developers\u002Fsnippets\",\"title\":\"Snippets\",\"published\":true,\"order\":17},{\"slug\":\"for_developers\u002Fstyles\",\"title\":\"Styles\",\"published\":true,\"order\":8},{\"slug\":\"for_developers\u002Fsvelte-faqs\",\"title\":\"Svelte FAQs\",\"published\":true,\"order\":16},{\"slug\":\"for_developers\u002Ftranslation\",\"title\":\"Translation\",\"published\":true,\"order\":12}]"}</script>
		
		</div>
	</body>
</html>
